{"ast":null,"code":"import _objectSpread from\"/Users/liamkrass/Documents/satProjectV2/sat-practice-app-1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useCallback,useEffect}from'react';import{typography,applyTypography,textColors}from'../styles/typography';import{formatMoney,roundMoney,addMoney,subtractMoney,multiplyMoney,parseMoneyInput,sanitizeMoney}from'../utils/money';import{saveBalance}from'../utils/balanceStorage';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MIN_BET=0.01;const RouletteGame=_ref=>{let{onClose,balance,onEarn}=_ref;const[gameState,setGameState]=useState({bets:[],totalBet:0,winningNumber:null,isSpinning:false,gameStatus:'betting',result:'',betAmount:roundMoney(1),wheelRotation:0});// European roulette numbers and their colors\nconst rouletteNumbers=[{number:0,color:'green'},{number:32,color:'red'},{number:15,color:'black'},{number:19,color:'red'},{number:4,color:'black'},{number:21,color:'red'},{number:2,color:'black'},{number:25,color:'red'},{number:17,color:'black'},{number:34,color:'red'},{number:6,color:'black'},{number:27,color:'red'},{number:13,color:'black'},{number:36,color:'red'},{number:11,color:'black'},{number:30,color:'red'},{number:8,color:'black'},{number:23,color:'red'},{number:10,color:'black'},{number:5,color:'red'},{number:24,color:'black'},{number:16,color:'red'},{number:33,color:'black'},{number:1,color:'red'},{number:20,color:'black'},{number:14,color:'red'},{number:31,color:'black'},{number:9,color:'red'},{number:22,color:'black'},{number:18,color:'red'},{number:29,color:'black'},{number:7,color:'red'},{number:28,color:'black'},{number:12,color:'red'},{number:35,color:'black'},{number:3,color:'red'},{number:26,color:'black'}];const getNumberColor=num=>{if(num===0)return'green';const redNumbers=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];return redNumbers.includes(num)?'red':'black';};const placeBet=useCallback((betType,numbers,payout)=>{if(gameState.gameStatus!=='betting'||balance<gameState.betAmount)return;const newBet={type:betType,numbers,amount:roundMoney(gameState.betAmount),payout};setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{bets:[...prev.bets,newBet],totalBet:roundMoney(addMoney(prev.totalBet,gameState.betAmount))}));onEarn(roundMoney(-gameState.betAmount));},[gameState.gameStatus,gameState.betAmount,balance,onEarn]);const clearBets=useCallback(()=>{onEarn(roundMoney(gameState.totalBet));// Return all bet money\nsetGameState(prev=>_objectSpread(_objectSpread({},prev),{},{bets:[],totalBet:0}));},[gameState.totalBet,onEarn]);const spin=useCallback(()=>{if(gameState.bets.length===0||gameState.gameStatus!=='betting')return;const winningNumber=Math.floor(Math.random()*37);// 0-36\nconst spinRotation=360*5+winningNumber*(360/37);// 5 full rotations plus position\nsetGameState(prev=>_objectSpread(_objectSpread({},prev),{},{gameStatus:'spinning',isSpinning:true,winningNumber,wheelRotation:prev.wheelRotation+spinRotation}));// Simulate spin duration\nsetTimeout(()=>{setGameState(prev=>{const winnings=prev.bets.reduce((total,bet)=>{if(bet.numbers.includes(winningNumber)){return addMoney(total,multiplyMoney(bet.amount,bet.payout));}return total;},0);if(winnings>0){onEarn(roundMoney(winnings));}const result=winnings>0?\"Winner! Number \".concat(winningNumber,\" (\").concat(getNumberColor(winningNumber),\"). Won \").concat(formatMoney(winnings)):\"Number \".concat(winningNumber,\" (\").concat(getNumberColor(winningNumber),\"). Better luck next time!\");return _objectSpread(_objectSpread({},prev),{},{gameStatus:'finished',isSpinning:false,result});});},3000);},[gameState.bets,gameState.gameStatus,onEarn]);const newGame=useCallback(()=>{setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{bets:[],totalBet:0,winningNumber:null,gameStatus:'betting',result:''}));},[]);// Generate straight number bets (0-36)\nconst renderNumberGrid=()=>{const numbers=[];// 0 (green)\nnumbers.push(/*#__PURE__*/_jsx(\"button\",{className:\"roulette-number green\",onClick:()=>placeBet('Straight',[0],35),disabled:gameState.gameStatus!=='betting',children:\"0\"},0));// Numbers 1-36 in roulette table layout\nfor(let i=1;i<=36;i++){const color=getNumberColor(i);numbers.push(/*#__PURE__*/_jsx(\"button\",{className:\"roulette-number \".concat(color),onClick:()=>placeBet('Straight',[i],35),disabled:gameState.gameStatus!=='betting',children:i},i));}return numbers;};useEffect(()=>{saveBalance(balance);},[balance]);return/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-game\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{style:_objectSpread(_objectSpread({},applyTypography(typography.heading.lg)),{},{color:textColors.primary,display:'flex',alignItems:'center',gap:'12px'}),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"32\",height:\"32\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"#1e293b\",stroke:\"#5eead4\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"7\",fill:\"#374151\"}),Array.from({length:8},(_,i)=>{const angle=i*45*Math.PI/180;const x1=12+5*Math.cos(angle);const y1=12+5*Math.sin(angle);const x2=12+7*Math.cos(angle);const y2=12+7*Math.sin(angle);return/*#__PURE__*/_jsx(\"line\",{x1:x1,y1:y1,x2:x2,y2:y2,stroke:\"#5eead4\",strokeWidth:\"0.5\"},i);}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"2\",fill:\"#fbbf24\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"16\",cy:\"8\",r:\"1\",fill:\"white\"})]}),\"Roulette\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"roulette-close-btn\",children:\"\\u2190\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"roulette-balance\",children:/*#__PURE__*/_jsxs(\"span\",{style:{color:'#5eead4',fontWeight:'bold'},children:[\"Balance: \",formatMoney(balance)]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-bet-section\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Bet Amount\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-bet-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{betAmount:roundMoney(Math.max(MIN_BET,subtractMoney(prev.betAmount,1)))})),children:\"-$1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:gameState.betAmount,onChange:e=>{const raw=parseMoneyInput(e.target.value);let clamped=Math.max(MIN_BET,Math.min(sanitizeMoney(raw),roundMoney(balance)));setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{betAmount:clamped}));},min:MIN_BET,step:\"0.01\",style:{width:80,textAlign:'center',margin:'0 8px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{betAmount:Math.max(MIN_BET,Math.min(roundMoney(addMoney(prev.betAmount,1)),roundMoney(balance)))})),children:\"+$1\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"roulette-bet-controls\",style:{marginTop:'10px'},children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{betAmount:Math.max(MIN_BET,roundMoney(balance))})),disabled:balance<MIN_BET,className:\"all-in-btn\",children:[\"All In (\",formatMoney(balance),\")\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"roulette-total-bet\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Total Bet: \",formatMoney(gameState.totalBet)]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-actions\",children:[gameState.gameStatus==='betting'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:spin,disabled:gameState.bets.length===0,className:\"roulette-spin-btn\",children:\"Spin!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearBets,disabled:gameState.bets.length===0,className:\"roulette-clear-btn\",children:\"Clear Bets\"})]}),gameState.gameStatus==='finished'&&/*#__PURE__*/_jsx(\"button\",{onClick:newGame,className:\"roulette-new-game-btn\",children:\"New Game\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-wheel-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-wheel\",style:{transform:\"rotate(\".concat(gameState.wheelRotation,\"deg)\")},children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"100%\",height:\"100%\",viewBox:\"0 0 300 300\",className:\"wheel-segments\",children:[rouletteNumbers.map((item,index)=>{const startAngle=index*(360/37)-360/37/2;const endAngle=startAngle+360/37;const startRad=startAngle*Math.PI/180;const endRad=endAngle*Math.PI/180;const x1=150+120*Math.cos(startRad);const y1=150+120*Math.sin(startRad);const x2=150+120*Math.cos(endRad);const y2=150+120*Math.sin(endRad);const segmentColor=item.color==='red'?'#dc2626':item.color==='black'?'#1f2937':'#059669';return/*#__PURE__*/_jsx(\"path\",{d:\"M 150 150 L \".concat(x1,\" \").concat(y1,\" A 120 120 0 0 1 \").concat(x2,\" \").concat(y2,\" Z\"),fill:segmentColor,stroke:\"#5eead4\",strokeWidth:\"1\"},\"segment-\".concat(item.number));}),/*#__PURE__*/_jsx(\"circle\",{cx:\"150\",cy:\"150\",r:\"30\",fill:\"#1e293b\",stroke:\"#5eead4\",strokeWidth:\"2\"})]}),rouletteNumbers.map((item,index)=>{const angle=index*(360/37);const radius=90;// Distance from center\nconst x=Math.cos((angle-90)*Math.PI/180)*radius;const y=Math.sin((angle-90)*Math.PI/180)*radius;return/*#__PURE__*/_jsx(\"div\",{className:\"wheel-number \".concat(item.color),style:{position:'absolute',left:'50%',top:'50%',transform:\"translate(calc(-50% + \".concat(x,\"px), calc(-50% + \").concat(y,\"px))\")},children:item.number},item.number);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"wheel-pointer\"}),gameState.winningNumber!==null&&!gameState.isSpinning&&/*#__PURE__*/_jsx(\"div\",{className:\"winning-number\",children:/*#__PURE__*/_jsx(\"span\",{className:getNumberColor(gameState.winningNumber),children:gameState.winningNumber})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"roulette-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"outside-bets\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"outside-bet red\",onClick:()=>placeBet('Red',[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36],2),disabled:gameState.gameStatus!=='betting',children:\"Red (2:1)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"outside-bet black\",onClick:()=>placeBet('Black',[2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35],2),disabled:gameState.gameStatus!=='betting',children:\"Black (2:1)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"outside-bet\",onClick:()=>placeBet('Even',[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],2),disabled:gameState.gameStatus!=='betting',children:\"Even (2:1)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"outside-bet\",onClick:()=>placeBet('Odd',[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35],2),disabled:gameState.gameStatus!=='betting',children:\"Odd (2:1)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"outside-bet\",onClick:()=>placeBet('1-18',Array.from({length:18},(_,i)=>i+1),2),disabled:gameState.gameStatus!=='betting',children:\"1-18 (2:1)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"outside-bet\",onClick:()=>placeBet('19-36',Array.from({length:18},(_,i)=>i+19),2),disabled:gameState.gameStatus!=='betting',children:\"19-36 (2:1)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"roulette-number-grid\",children:renderNumberGrid()})]}),gameState.result&&/*#__PURE__*/_jsx(\"div\",{className:\"roulette-result\",children:/*#__PURE__*/_jsx(\"h3\",{style:{color:gameState.result.includes('Winner')?'#10b981':'#dc2626'},children:gameState.result})})]})]});};export default RouletteGame;","map":null,"metadata":{},"sourceType":"module"}