{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAnsweredQuestions,getAnsweredQuestionsDetailed,getAnsweredQuestionsMap,debugProgress,clearProgress,cleanupDuplicates}from'../utils/progressStorage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DebugPage=()=>{const[debugData,setDebugData]=useState(null);const[refreshKey,setRefreshKey]=useState(0);const refresh=()=>{const data=debugProgress();setDebugData(data);setRefreshKey(prev=>prev+1);};useEffect(()=>{refresh();},[refreshKey]);const handleCleanup=()=>{const result=cleanupDuplicates();console.log('Cleanup result:',result);refresh();};const handleClear=()=>{clearProgress();refresh();};const legacy=getAnsweredQuestions();const detailed=getAnsweredQuestionsDetailed();const map=getAnsweredQuestionsMap();return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'800px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Progress Storage Debug\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:refresh,style:{marginRight:'10px'},children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCleanup,style:{marginRight:'10px'},children:\"Cleanup Duplicates\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClear,style:{marginRight:'10px'},children:\"Clear All\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'15px',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Legacy Format\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Count:\"}),\" \",legacy.length]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"IDs:\"}),\" \",legacy.join(', ')]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'15px',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Detailed Format\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Count:\"}),\" \",detailed.length]}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'200px',overflow:'auto'},children:detailed.map((item,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'5px',fontSize:'12px'},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[item.id,\":\"]}),\" \\\"\",item.answer,\"\\\"\",/*#__PURE__*/_jsxs(\"span\",{style:{color:'#666'},children:[\" at \",new Date(item.timestamp).toLocaleString()]})]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'15px',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Generated Map\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Count:\"}),\" \",Object.keys(map).length]}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'200px',overflow:'auto'},children:Object.entries(map).map((_ref,i)=>{let[id,answer]=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'5px',fontSize:'12px'},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[id,\":\"]}),\" \\\"\",answer,\"\\\"\"]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'15px',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Analysis\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Legacy vs Detailed:\"}),\" \",legacy.length===detailed.length?'✅ Match':'❌ Mismatch']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Detailed vs Map:\"}),\" \",detailed.length===Object.keys(map).length?'✅ Match':'❌ Mismatch']}),(()=>{const ids=detailed.map(item=>item.id);const uniqueIds=Array.from(new Set(ids));const duplicates=ids.length-uniqueIds.length;return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duplicates in detailed:\"}),\" \",duplicates===0?'✅ None':\"\\u274C \".concat(duplicates,\" found\")]});})()]})]})]});};export default DebugPage;","map":null,"metadata":{},"sourceType":"module"}